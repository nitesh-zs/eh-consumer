{
  "input": {
    "type": "EVENTHUB"
  },
  "layers": [
    {
      "type" : "filter",
      "filter" :{
        "column" : "eventHeader.type",
        "condition" : "IN",
        "values" : [
          "event-imf-processed"
        ]
      }
    }
  ],
  "output": [
    {
      "type": "JSON",
      "target": "imf_out.json",
      "batch_size": 1,
      "schema": {
        "imfID": "data.imfID",
        "type": "data.type",
        "imfStatus": "data.imfStatus",
        "level1Gtin14": "data.gtin.level1Gtin14",
        "caseGtin14": "data.gtin.caseGtin14",
        "casePackQty": "data.gtin.casePackQty",
        "consumer": "data.gtin.consumer",
        "level2Gtin14": "data.gtin.level2Gtin14",
        "level2Qty": "data.gtin.level2Qty",
        "weekOfPeriod": "data.startDate.weekOfPeriod",
        "period": "data.startDate.period",
        "year": "data.startDate.year",
        "division": "data.location.division",
        "catalogID": "data.location.catalogID",
        "storeID": "data.location.storeID",
        "fulfilmentSiteID": "data.location.fulfilmentSiteID",
        "warehouse": "data.location.warehouse",
        "isMultiConsumerCase": "data.isMultiConsumerCase",
        "isOcadoItem": "data.isOcadoItem"
      }
    }
  ]
}